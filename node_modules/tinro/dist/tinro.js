var U=Object.create;var _=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var C=e=>_(e,"__esModule",{value:!0});var V=(e,a)=>{C(e);for(var n in a)_(e,n,{get:a[n],enumerable:!0})},X=(e,a,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of B(a))!J.call(e,r)&&r!=="default"&&_(e,r,{get:()=>a[r],enumerable:!(n=Z(a,r))||n.enumerable});return e},p=e=>X(C(_(e!=null?U(G(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);V(exports,{Route:()=>P,active:()=>z,meta:()=>x,router:()=>b});var c=p(require("svelte/internal"));var j=p(require("svelte")),A=p(require("svelte/store")),ft=p(require("svelte/store")),m=p(require("svelte")),T=p(require("svelte/store"));function R(e,a=!1){return e=e.slice(e.startsWith("/#")?2:0,e.endsWith("/*")?-2:void 0),e.startsWith("/")||(e="/"+e),e==="/"&&(e=""),a&&!e.endsWith("/")&&(e+="/"),e}function E(e,a){e=R(e,!0),a=R(a,!0);let n=[],r={},t=!0,i=e.split("/").map(l=>l.startsWith(":")?(n.push(l.slice(1)),"([^\\/]+)"):l).join("\\/"),s=a.match(new RegExp(`^${i}$`));return s||(t=!1,s=a.match(new RegExp(`^${i}`))),s?(n.forEach((l,d)=>r[l]=s[d+1]),{exact:t,params:r,part:s[0].slice(0,-1)}):null}function F(e,a,n){if(n==="")return e;if(n[0]==="/")return n;let r=s=>s.split("/").filter(l=>l!==""),t=r(e),i=a?r(a):[];return"/"+i.map((s,l)=>t[l]).join("/")+"/"+n}function w(e,a,n,r){let t=[a,"data-"+a].reduce((i,s)=>{let l=e.getAttribute(s);return n&&e.removeAttribute(s),l===null?i:l},!1);return!r&&t===""?!0:t||r||!1}function $(e){let a=e.split("&").map(n=>n.split("=")).reduce((n,r)=>{let t=r[0];if(!t)return n;let i=r.length>1?r[r.length-1]:!0;return typeof i=="string"&&i.includes(",")&&(i=i.split(",")),n[t]===void 0?n[t]=[i]:n[t].push(i),n},{});return Object.entries(a).reduce((n,r)=>(n[r[0]]=r[1].length>1?r[1]:r[1][0],n),{})}function tt(e){return Object.entries(e).map(([a,n])=>n?n===!0?a:`${a}=${Array.isArray(n)?n.join(","):n}`:null).filter(a=>a).join("&")}function M(e,a){return e?a+e:""}function q(e){throw new Error("[Tinro] "+e)}var h={HISTORY:1,HASH:2,MEMORY:3,OFF:4,run(e,a,n,r){return e===this.HISTORY?a&&a():e===this.HASH?n&&n():r&&r()},getDefault(){return!window||window.location.pathname==="srcdoc"?this.MEMORY:this.HISTORY}},O,Y,W,k="",f=et();function et(){let e=h.getDefault(),a,n=s=>window.onhashchange=window.onpopstate=O=null,r=s=>a&&a(S(e)),t=s=>{s&&(e=s),n(),e!==h.OFF&&h.run(e,l=>window.onpopstate=r,l=>window.onhashchange=r)&&r()},i=s=>{let l=Object.assign(S(e),s);return l.path+M(tt(l.query),"?")+M(l.hash,"#")};return{mode:t,get:s=>S(e),go(s,l){at(e,s,l),r()},start(s){a=s,t()},stop(){a=null,t(h.OFF)},set(s){this.go(i(s),!s.path)},methods(){return rt(this)},base:s=>k=s}}function at(e,a,n){!n&&(Y=W);let r=t=>history[`${n?"replace":"push"}State`]({},"",t);h.run(e,t=>r(k+a),t=>r(`#${a}`),t=>O=a)}function S(e){let a=window.location,n=h.run(e,t=>(k?a.pathname.replace(k,""):a.pathname)+a.search+a.hash,t=>String(a.hash.slice(1)||"/"),t=>O||"/"),r=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return W=n,{url:n,from:Y,path:r[1]||"",query:$(r[2]||""),hash:r[3]||""}}function rt(e){let a=()=>e.get().query,n=s=>e.set({query:s}),r=s=>n(s(a())),t=()=>e.get().hash,i=s=>e.set({hash:s});return{hash:{get:t,set:i,clear:()=>i("")},query:{replace:n,clear:()=>n(""),get(s){return s?a()[s]:a()},set(s,l){r(d=>(d[s]=l,d))},delete(s){r(l=>(l[s]&&delete l[s],l))}}}}var b=nt();function nt(){let{subscribe:e}=(0,A.writable)(f.get(),a=>{f.start(a);let n=st(f.go);return()=>{f.stop(),n()}});return{subscribe:e,goto:f.go,params:it,meta:x,useHashNavigation:a=>f.mode(a?h.HASH:h.HISTORY),mode:{hash:()=>f.mode(h.HASH),history:()=>f.mode(h.HISTORY),memory:()=>f.mode(h.MEMORY)},base:f.base,location:f.methods()}}function z(e){let a,n,r,t,i=()=>{a=w(e,"href").replace(/^\/#|[?#].*$|\/$/g,""),n=w(e,"exact",!0),r=w(e,"active-class",!0,"active")},s=()=>{let l=E(a,t);l&&(l.exact&&n||!n)?e.classList.add(r):e.classList.remove(r)};return i(),{destroy:b.subscribe(l=>{t=l.path,s()}),update:()=>{i(),s()}}}function st(e){let a=n=>{let r=n.target.closest("a[href]"),t=r&&w(r,"target",!1,"_self"),i=r&&w(r,"tinro-ignore"),s=n.ctrlKey||n.metaKey||n.altKey||n.shiftKey;if(t=="_self"&&!i&&!s&&r){let l=r.getAttribute("href").replace(/^\/#/,"");/^\/\/|^#|^[a-zA-Z]+:/.test(l)||(n.preventDefault(),e(l.startsWith("/")?l:r.href.replace(window.location.origin,"")))}};return addEventListener("click",a),()=>removeEventListener("click",a)}function it(){return(0,j.getContext)("tinro").meta.params}var y="tinro",lt=K({pattern:"",matched:!0});function I(e){let a=(0,m.getContext)(y)||lt;(a.exact||a.fallback)&&q(`${e.fallback?"<Route fallback>":`<Route path="${e.path}">`}  can't be inside ${a.fallback?"<Route fallback>":`<Route path="${a.path||"/"}"> with exact path`}`);let n=e.fallback?"fallbacks":"childs",r=(0,T.writable)({}),t=K({fallback:e.fallback,parent:a,update(i){t.exact=!i.path.endsWith("/*"),t.pattern=R(`${t.parent.pattern||""}${i.path}`),t.redirect=i.redirect,t.firstmatch=i.firstmatch,t.breadcrumb=i.breadcrumb,t.match()},register:()=>(t.parent[n].add(t),async()=>{t.parent[n].delete(t),t.parent.activeChilds.delete(t),t.router.un&&t.router.un(),t.parent.match()}),show:()=>{e.onShow(),!t.fallback&&t.parent.activeChilds.add(t)},hide:()=>{e.onHide(),t.parent.activeChilds.delete(t)},match:async()=>{t.matched=!1;let{path:i,url:s,from:l,query:d}=t.router.location,u=E(t.pattern,i);if(!t.fallback&&u&&t.redirect&&(!t.exact||t.exact&&u.exact)){let g=F(i,t.parent.pattern,t.redirect);return b.goto(g,!0)}t.meta=u&&{from:l,url:s,query:d,match:u.part,pattern:t.pattern,breadcrumbs:t.parent.meta&&t.parent.meta.breadcrumbs.slice()||[],params:u.params,subscribe:r.subscribe},t.breadcrumb&&t.meta&&t.meta.breadcrumbs.push({name:t.breadcrumb,path:u.part}),r.set(t.meta),u&&!t.fallback&&(!t.exact||t.exact&&u.exact)&&(!t.parent.firstmatch||!t.parent.matched)?(e.onMeta(t.meta),t.parent.matched=!0,t.show()):t.hide(),u&&t.showFallbacks()}});return(0,m.setContext)(y,t),(0,m.onMount)(()=>t.register()),t}function x(){return(0,m.hasContext)(y)?(0,m.getContext)(y).meta:q("meta() function must be run inside any `<Route>` child component only")}function K(e){let a={router:{},exact:!1,pattern:null,meta:null,parent:null,fallback:!1,redirect:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,async showFallbacks(){if(!this.fallback&&(await(0,m.tick)(),this.childs.size>0&&this.activeChilds.size==0||this.childs.size==0&&this.fallbacks.size>0)){let n=this;for(;n.fallbacks.size==0;)if(n=n.parent,!n)return;n&&n.fallbacks.forEach(r=>{if(r.redirect){let t=F("/",r.parent.pattern,r.redirect);b.goto(t,!0)}else r.show()})}},start(){this.router.un||(this.router.un=b.subscribe(n=>{this.router.location=n,this.pattern!==null&&this.match()}))},match(){this.showFallbacks()}};return Object.assign(a,e),a.start(),a}var ct=e=>({params:e&2,meta:e&4}),L=e=>({params:e[1],meta:e[2]});function D(e){let a,n=e[9].default,r=(0,c.create_slot)(n,e,e[8],L);return{c(){r&&r.c()},m(t,i){r&&r.m(t,i),a=!0},p(t,i){r&&r.p&&(!a||i&262)&&(0,c.update_slot_base)(r,n,t,t[8],a?(0,c.get_slot_changes)(n,t[8],i,ct):(0,c.get_all_dirty_from_scope)(t[8]),L)},i(t){a||((0,c.transition_in)(r,t),a=!0)},o(t){(0,c.transition_out)(r,t),a=!1},d(t){r&&r.d(t)}}}function ot(e){let a,n,r=e[0]&&D(e);return{c(){r&&r.c(),a=(0,c.empty)()},m(t,i){r&&r.m(t,i),(0,c.insert)(t,a,i),n=!0},p(t,[i]){t[0]?r?(r.p(t,i),i&1&&(0,c.transition_in)(r,1)):(r=D(t),r.c(),(0,c.transition_in)(r,1),r.m(a.parentNode,a)):r&&((0,c.group_outros)(),(0,c.transition_out)(r,1,1,()=>{r=null}),(0,c.check_outros)())},i(t){n||((0,c.transition_in)(r),n=!0)},o(t){(0,c.transition_out)(r),n=!1},d(t){r&&r.d(t),t&&(0,c.detach)(a)}}}function ut(e,a,n){let{$$slots:r={},$$scope:t}=a,{path:i="/*"}=a,{fallback:s=!1}=a,{redirect:l=!1}=a,{firstmatch:d=!1}=a,{breadcrumb:u=null}=a,g=!1,H={},v={},Q=I({fallback:s,onShow(){n(0,g=!0)},onHide(){n(0,g=!1)},onMeta(o){n(2,v=o),n(1,H=v.params)}});return e.$$set=o=>{"path"in o&&n(3,i=o.path),"fallback"in o&&n(4,s=o.fallback),"redirect"in o&&n(5,l=o.redirect),"firstmatch"in o&&n(6,d=o.firstmatch),"breadcrumb"in o&&n(7,u=o.breadcrumb),"$$scope"in o&&n(8,t=o.$$scope)},e.$$.update=()=>{if(e.$$.dirty&232){t:Q.update({path:i,redirect:l,firstmatch:d,breadcrumb:u})}},[g,H,v,i,s,l,d,u,t,r]}var N=class extends c.SvelteComponent{constructor(a){super();(0,c.init)(this,a,ut,ot,c.safe_not_equal,{path:3,fallback:4,redirect:5,firstmatch:6,breadcrumb:7})}},P=N;
